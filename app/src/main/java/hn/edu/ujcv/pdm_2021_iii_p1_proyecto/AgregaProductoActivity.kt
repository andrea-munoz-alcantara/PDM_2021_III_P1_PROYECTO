package hn.edu.ujcv.pdm_2021_iii_p1_proyecto

import android.content.Intent
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import kotlinx.android.synthetic.main.activity_agrega_cliente.*
import kotlinx.android.synthetic.main.activity_agrega_producto.*
import java.lang.StringBuilder
import java.util.*
import kotlin.collections.HashMap

class AgregaProductoActivity : AppCompatActivity() {
    var productos : HashMap<Int, String> = hashMapOf()


    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_agrega_producto)
        inicializarProducto()
        btnGuardarProducto.setOnClickListener { guardarProducto() }
        btnVisualizarProducto.setOnClickListener { visualizarProducto() }
    }

    private fun inicializarProducto() {
        btnVisualizarProducto.isEnabled=false
    }

    private fun visualizarProducto() {
        val intent = Intent(this,BuscarProductoActivity::class.java)
        intent.putExtra("productos",productos)
        startActivity(intent)
    }

    private fun guardarProducto() {
        val dato = StringBuilder()
        val codigo = txtCodigoProducto.text.toString().toInt()
        val precio = txtPrecioProducto.text.toString().toDouble()
        dato.append("CODIGO : ").append(txtCodigoProducto.text.toString().toInt()).append("| NOMBRE : ")
        dato.append(txtNombreProducto.text.toString()).append(" | PROVEEDOR : ")
        dato.append(txtProveedorProducto.text.toString()).append(" | PRECIO : ")
        dato.append(txtPrecioProducto.text.toString().toDouble()).append(" | STOCK ACTUAL : ")
        dato.append(txtStockProducto.text.toString().toInt())
        productos.put(codigo, dato.toString())
        txtCodigoProducto.setText("")
        txtNombreProducto.setText("")
        txtProveedorProducto.setText("")
        txtPrecioProducto.setText("")
        txtStockProducto.setText("")
        txvEstadoProducto.setText("EL PRODUCTO CON CODIGO $codigo HA SIDO AGREGADO")
        btnVisualizarProducto.isEnabled=true
        val hashMap = HashMap<Int, Double>()
        hashMap[codigo] = precio
        val intent = Intent(this, IngresarFacturasActivity::class.java)
        intent.putExtra("map", hashMap)
        startActivity(intent)
    }



}
























































































































































































































































































































































































































































































































































































































































































































































